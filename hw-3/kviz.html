<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="kviz.css">

    </head>
    <body onload="funkcija()">
    <div class="container kviz">

        <div class="row tajmer">
            <p id="vreme"> Preostalo vreme je: 20s</p>
        </div>

        <div class="row pitanje">
            <p id="pitanje"></p>
        </div>
        <div class="odgovori">
            <div class="col-md-6">
            <button id="odg1"></button>
            </div>
            <div class="col-md-6">
            <button id="odg3"></button>
            </div>
            <div class="col-md-6">
            <button id="odg2"></button>
            </div>
            <div class="col-md-6">
            <button id="odg4"></button>
            </div>
            <div class="row odustani">
                <button id="preskoci">Preskoƒçite pitanje</button>
                <button id="odustani">Odustani</button>
            </div>

        </div>
        <script>
            var pitanja;
            function funkcija(){
            fetch('pitanja.json').then(function(response){
                return response.json();
            }).then(function (obj) {
                pitanja = obj;
            });
            }
            var brojPitanja = 0;
            var brojac = 0;
            setTimeout(prikazPitanja, 500);
            var pitanje = document.getElementById("pitanje");
            var odg1 = document.getElementById("odg1");
            var odg2 = document.getElementById("odg2");
            var odg3 = document.getElementById("odg3");
            var odg4 = document.getElementById("odg4");
            var poeni = 0;
            function prikazPitanja(){
                if(brojPitanja<10){
                prikazTajmera();
                pitanje.innerHTML = pitanja[brojPitanja].pitanje;
                odg1.innerHTML = pitanja[brojPitanja].A;
                odg2.innerHTML = pitanja[brojPitanja].B;
                odg3.innerHTML = pitanja[brojPitanja].C;
                odg4.innerHTML = pitanja[brojPitanja].D;
                brojPitanja++;
                brojac++;
              

                odg1.style.background= "pink";
                odg2.style.background= "pink";
                odg3.style.background= "pink";
                odg4.style.background= "pink";

                odg1.style.pointerEvents = "all";
                odg2.style.pointerEvents = "all";
                odg3.style.pointerEvents = "all";
                odg4.style.pointerEvents = "all";
                console.log(poeni);

            }
            else{
                window.location.href="kraj.html";
            }
        

            }
            var preskociDugme = document.getElementById("preskoci");
            preskociDugme.onclick = () =>{
                flag = true;
                prikazPitanja();
            }

            var odustaniDugme = document.getElementById("odustani");
            odustaniDugme.onclick= () => {
                flag = true;
                window.location.href = "kraj.html";
            }
            
                
             var tacanOdg;
             var flag = false;

                odg1.onclick = () => {
                    flag = true;
                    setTimeout(prikazPitanja, 2000);
                    tacanOdg = pitanja[brojPitanja-1].TacanOdg;
                    if(odg1.innerHTML == tacanOdg){
                        odg1.style.backgroundColor = "green";
                        poeni++;

                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }

                    else{
                        odg1.style.backgroundColor = "red";
                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }
                    

                    

                }

                odg2.onclick=() =>{
                    flag = true;
                    setTimeout(prikazPitanja, 2000);
                    tacanOdg = pitanja[brojPitanja-1].TacanOdg;
                    if(odg2.innerHTML == tacanOdg){
                        odg2.style.backgroundColor = "green";
                        poeni++;
                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }

                    else{
                        odg2.style.backgroundColor = "red";
                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }
                


                }

                odg3.onclick=() =>{
                    flag = true;
                    setTimeout(prikazPitanja, 2000);
                    tacanOdg = pitanja[brojPitanja-1].TacanOdg;
                    if(odg3.innerHTML == tacanOdg){
                        odg3.style.backgroundColor = "green";
                        poeni++;
                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }

                    else{
                        odg3.style.backgroundColor = "red";
                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }

                }

                odg4.onclick=() =>{
                    flag = true;
                    setTimeout(prikazPitanja, 2000);
                    tacanOdg = pitanja[brojPitanja-1].TacanOdg;
                    if(odg4.innerHTML == tacanOdg){
                        odg4.style.backgroundColor = "green";
                        poeni++;
                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }

                    else{
                        odg4.style.backgroundColor = "red";
                        odg1.style.pointerEvents = "none";
                        odg2.style.pointerEvents = "none";
                        odg3.style.pointerEvents = "none";
                        odg4.style.pointerEvents = "none";
                    }
                    

                }

            var tajmer = 20;

            function prikazTajmera(){

                tajmer = 20;

                var int = setInterval( function(){
                    if(flag){
                        clearInterval(int);
                        flag = false;
                    }
                    if(tajmer <=0){
                        clearInterval(int);
                    }
                    document.getElementById("vreme").innerHTML = "Preostalo vreme je: " + tajmer;
                    tajmer--;
                }, 1000); 

            }
        </script>
    </body>
</html>